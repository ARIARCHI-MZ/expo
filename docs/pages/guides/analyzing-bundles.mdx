---
title: Analyzing JavaScript Bundles
description: Learn about improving the production JavaScript bundle size of Expo apps and websites.
---

import { Step } from '~/ui/components/Step';
import { Terminal } from '~/ui/components/Snippet';
import { Tab, Tabs, TabsGroup } from '~/ui/components/Tabs';

Bundle performance varies depending on the platform you're building for. For example, web browser do not support precompiled bytecode, so the JavaScript bundle size is very important for improving startup time and performance. The smaller the bundle, the faster it can be downloaded and parsed.

## Analyzing bundle size

The libraries you use influence the size of your production JavaScript bundle. You can use [souce map explorer][source-map-explorer] to visualize the production bundle and identify which libraries are contributing to the bundle size.

<Step label="1">
  To use source map explorer, first install it in the project:
  <Terminal cmd={['$ yarn add -D source-map-explorer']} />
</Step>

<Step label="2">
  Then add a script to your `package.json` to run it, you may need to adjust the input path depending on the platform or SDK you're using. For the sake of brevity, this example assumes the project is Expo SDK 50 and does not use Expo Router `server` output.

  ```json package.json
  {
    "scripts": {
      "analyze:web": "source-map-explorer 'dist/_expo/static/js/web/*.js' 'dist/_expo/static/js/web/*.js.map'",
      "analyze:ios": "source-map-explorer 'dist/_expo/static/js/ios/*.js' 'dist/_expo/static/js/ios/*.js.map'",
      "analyze:android": "source-map-explorer 'dist/_expo/static/js/android/*.js' 'dist/_expo/static/js/android/*.js.map'",
    }
  }
  ```

  If you are using the SDK 50 `server` output for web, then use `npx source-map-explorer dist/client/_expo/static/js/web/*.js dist/client/_expo/static/js/web/*.js.map` to map web bundles. This is because web bundles are output to the `dist/client` subdirectory to prevent exposing server code to the client.
</Step>

<Step label="3">

  Now you can export your production JavaScript bundle. Be sure to include the `--source-maps` flag so that source map explorer can read the source maps.

  <Terminal cmd={['$ npx expo export --source-maps --platform web']} />

  You should see the JavaScript bundle and source map paths in the output from this command. We'll pass these to source map explorer in the next step.

  > Avoid publishing source maps to production as they can cause both security issues and performance issues (browser will download the large maps).

</Step>

<Step label="4">

  Now to analyze the bundle, run the script you added in the previous step.

  <Terminal cmd={['$ yarn analyze:web']} />

  If you encounter the following error:
  
  ```
  You must provide the URL of lib/mappings.wasm by calling SourceMapConsumer.initialize({ 'lib/mappings.wasm': ... }) before using SourceMapConsumer
  ``` 
  
  Then this is probably due to a [known issue](https://github.com/danvk/source-map-explorer/issues/247) in `source-map-explorer` regarding Node.js +18 support. 
  
  Set the environment variable `NODE_OPTIONS=--no-experimental-fetch` before running the analyze script.

</Step>

You may see a warning like `Unable to map 809/13787 bytes (5.87%)` in the output, this is because the bundler runtime definitions (e.g. `__d(() => {}, [])`) are often not included in the source maps. This is a consistent value and shouldn't be a cause for concern.

## Lighthouse

Lighthouse is a great way to see how fast, accessible, and performant your website is.
You can test your project with the _Audit_ tab in Chrome, or with the [**Lighthouse CLI**][lighthouse].

After creating a production build with `npx expo export -p web` and serving it somewhere (`npx serve dist`, production deployment, custom server), run Lighthouse with the URL your site is hosted at.

<Terminal cmd={[
  '# Install the lighthouse CLI',
  '$ npm install -g lighthouse',
  '# Run the lighthouse CLI for your site',
  '$ npx lighthouse <url> --view'
]} />


[lighthouse]: https://github.com/GoogleChrome/lighthouse#using-the-node-cli
[source-map-explorer]: https://www.npmjs.com/package/source-map-explorer
