{"version":3,"file":"nativeCssTransform.js","names":["_cssToRn","data","require","_metroTransformWorker","_interopRequireDefault","_cssModules","obj","__esModule","default","nativeCssTransform","config","projectRoot","filename","options","nativeStyles","cssToReactNativeRuntime","matchCssModule","worker","transform","Buffer","from","JSON","stringify"],"sources":["../../src/transform-worker/nativeCssTransform.ts"],"sourcesContent":["import { cssToReactNativeRuntime } from '@expo/styling/css-to-rn';\nimport worker, {\n  JsTransformerConfig,\n  JsTransformOptions,\n  TransformResponse,\n} from 'metro-transform-worker';\n\nimport { matchCssModule } from './css-modules';\n\nexport async function nativeCssTransform(\n  config: JsTransformerConfig & {\n    externallyManagedCss?: Record<string, string>;\n  },\n  projectRoot: string,\n  filename: string,\n  data: Buffer,\n  options: JsTransformOptions\n): Promise<TransformResponse> {\n  const nativeStyles = cssToReactNativeRuntime(data);\n\n  if (matchCssModule(filename)) {\n    return worker.transform(\n      config,\n      projectRoot,\n      filename,\n      Buffer.from(\n        `module.exports = require(\"@expo/styling\").StyleSheet.create(${JSON.stringify(\n          nativeStyles\n        )});`\n      ),\n      options\n    );\n  } else {\n    return worker.transform(\n      config,\n      projectRoot,\n      filename,\n      Buffer.from(`require(\"@expo/styling\").StyleSheet.register(${JSON.stringify(nativeStyles)});`),\n      options\n    );\n  }\n}\n"],"mappings":";;;;;;AAAA,SAAAA,SAAA;EAAA,MAAAC,IAAA,GAAAC,OAAA;EAAAF,QAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAE,sBAAA;EAAA,MAAAF,IAAA,GAAAG,sBAAA,CAAAF,OAAA;EAAAC,qBAAA,YAAAA,CAAA;IAAA,OAAAF,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAMA,SAAAI,YAAA;EAAA,MAAAJ,IAAA,GAAAC,OAAA;EAAAG,WAAA,YAAAA,CAAA;IAAA,OAAAJ,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAA+C,SAAAG,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAExC,eAAeG,kBAAkBA,CACtCC,MAEC,EACDC,WAAmB,EACnBC,QAAgB,EAChBX,IAAY,EACZY,OAA2B,EACC;EAC5B,MAAMC,YAAY,GAAG,IAAAC,kCAAuB,EAACd,IAAI,CAAC;EAElD,IAAI,IAAAe,4BAAc,EAACJ,QAAQ,CAAC,EAAE;IAC5B,OAAOK,+BAAM,CAACC,SAAS,CACrBR,MAAM,EACNC,WAAW,EACXC,QAAQ,EACRO,MAAM,CAACC,IAAI,CACR,+DAA8DC,IAAI,CAACC,SAAS,CAC3ER,YAAY,CACZ,IAAG,CACN,EACDD,OAAO,CACR;EACH,CAAC,MAAM;IACL,OAAOI,+BAAM,CAACC,SAAS,CACrBR,MAAM,EACNC,WAAW,EACXC,QAAQ,EACRO,MAAM,CAACC,IAAI,CAAE,gDAA+CC,IAAI,CAACC,SAAS,CAACR,YAAY,CAAE,IAAG,CAAC,EAC7FD,OAAO,CACR;EACH;AACF"}