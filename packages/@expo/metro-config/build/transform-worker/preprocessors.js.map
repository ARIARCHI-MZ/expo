{"version":3,"file":"preprocessors.js","names":["_postcss","data","require","_sass","cssPreprocessors","projectRoot","filename","code","toString","transformPostCssModule","src","syntax","matchSass","compileSass"],"sources":["../../src/transform-worker/preprocessors.ts"],"sourcesContent":["import { transformPostCssModule } from './postcss';\nimport { compileSass, matchSass } from './sass';\n\nexport async function cssPreprocessors(projectRoot: string, filename: string, data: Buffer) {\n  let code = data.toString('utf8');\n\n  // Apply postcss transforms\n  code = await transformPostCssModule(projectRoot, {\n    src: code,\n    filename,\n  });\n\n  // TODO: When native has CSS support, this will need to move higher up.\n  const syntax = matchSass(filename);\n  if (syntax) {\n    code = compileSass(projectRoot, { filename, src: code }, { syntax }).src;\n  }\n\n  return code;\n}\n"],"mappings":";;;;;;AAAA,SAAAA,SAAA;EAAA,MAAAC,IAAA,GAAAC,OAAA;EAAAF,QAAA,YAAAA,CAAA;IAAA,OAAAC,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AACA,SAAAE,MAAA;EAAA,MAAAF,IAAA,GAAAC,OAAA;EAAAC,KAAA,YAAAA,CAAA;IAAA,OAAAF,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAEO,eAAeG,gBAAgBA,CAACC,WAAmB,EAAEC,QAAgB,EAAEL,IAAY,EAAE;EAC1F,IAAIM,IAAI,GAAGN,IAAI,CAACO,QAAQ,CAAC,MAAM,CAAC;;EAEhC;EACAD,IAAI,GAAG,MAAM,IAAAE,iCAAsB,EAACJ,WAAW,EAAE;IAC/CK,GAAG,EAAEH,IAAI;IACTD;EACF,CAAC,CAAC;;EAEF;EACA,MAAMK,MAAM,GAAG,IAAAC,iBAAS,EAACN,QAAQ,CAAC;EAClC,IAAIK,MAAM,EAAE;IACVJ,IAAI,GAAG,IAAAM,mBAAW,EAACR,WAAW,EAAE;MAAEC,QAAQ;MAAEI,GAAG,EAAEH;IAAK,CAAC,EAAE;MAAEI;IAAO,CAAC,CAAC,CAACD,GAAG;EAC1E;EAEA,OAAOH,IAAI;AACb"}